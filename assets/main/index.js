System.register("chunks:///_virtual/AssetsCacheManager.ts",["cc"],(function(s){"use strict";var e,t,c,n;return{setters:[function(s){e=s.cclegacy,t=s._decorator,c=s.assetManager,n=s.SpriteFrame}],execute:function(){var a,r;e._RF.push({},"43ef7kVPH9DxJsOBofa3GkZ","AssetsCacheManager",void 0);var o=t.ccclass;s("AssetsCacheManager",o("AssetsCacheManager")(((r=function(){function s(){var s=this;this.assetsCache={},this.resources=void 0,this.resources=c.getBundle("resources"),this.resources.loadDir("equipmentIcons/Bow",n,(function(e,t){s.assetsCache.Bow=t})),this.resources.loadDir("equipmentIcons/Attractorb",n,(function(e,t){s.assetsCache.Attractorb=t})),this.resources.loadDir("expIcons",n,(function(e,t){s.assetsCache.ExpIcons=t})),this.resources.loadDir("common",n,(function(e,t){s.assetsCache.Common={},t.forEach((function(e){s.assetsCache.Common[e.name]=e}))}))}return s.instance=function(){return this._instance||(this._instance=new s),this._instance},s}())._instance=void 0,a=r))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/Attractorb.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseEquipment.ts","./Exp.ts","./Player.ts"],(function(t){"use strict";var e,o,n,r,i,a,c,s,u;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,r=t.Collider2D,i=t.Contact2DType,a=t.CircleCollider2D},function(t){c=t.BaseEquipment},function(t){s=t.Exp},function(t){u=t.default}],execute:function(){var l;o._RF.push({},"8fed4CsH4VCO6PwMB/YccPI","Attractorb",void 0);var p=n.ccclass;t("Attractorb",p("Attractorb")(l=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var n=o.prototype;return n.start=function(){this.equipmentName="Attractorb",this.maxLv=5;var t=this.getComponent(r);t&&t.on(i.BEGIN_CONTACT,this.onBeginContact,this)},n.onBeginContact=function(t,e,o){e.getComponent(s).attractTo(this.playerNode)},n.show=function(t){var e=t.level;this.lv=e},n.upgrade=function(){t.prototype.upgrade.call(this);var e=30;switch(this.lv){case 2:e=60;break;case 3:e=90;break;case 4:e=120;break;case 5:e=200}var o=this.node.getComponent(a);o.radius=e,o.apply()},n.update=function(t){if(this.playerNode){var e=this.playerNode.getComponent(u);this.node.setPosition(e.node.position.clone().add(e.moveDir.clone().multiplyScalar(0)))}},o}(c))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/BaseEquipment.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseObject.ts"],(function(e){"use strict";var t,r,i,n,o,a,u,l,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,u=e.Node,l=e.CCInteger},function(e){p=e.BaseObject}],execute:function(){var c,s,f,b,y,m,d,g,v,h,L,w,z;o._RF.push({},"b468b7L7uNPZqD+DF5VOxft","BaseEquipment",void 0);var B=a.ccclass,q=a.property;e("BaseEquipment",(c=B("BaseEquipment"),s=q({type:u}),f=q({type:u}),b=q(l),y=q({type:l,tooltip:"最远距离"}),m=q({type:l,tooltip:"速度"}),c((v=t((g=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"root",v,n(t)),i(t,"playerNode",h,n(t)),i(t,"damage",L,n(t)),i(t,"maxMoveLength",w,n(t)),i(t,"speed",z,n(t)),t.lv=1,t.maxLv=1,t.equipmentName=void 0,t}r(t,e);var o=t.prototype;return o.dropLOOT=function(){return[]},o.start=function(){},o.update=function(e){},o.show=function(e){},o.upgrade=function(){this.lv<this.maxLv&&(this.lv+=1)},t}(p)).prototype,"root",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=t(g.prototype,"playerNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(g.prototype,"damage",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),w=t(g.prototype,"maxMoveLength",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),z=t(g.prototype,"speed",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),d=g))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/BaseEquipmentBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseObject.ts"],(function(e){"use strict";var t,r,n,i,a,o,u,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,u=e.CCInteger},function(e){l=e.BaseObject}],execute:function(){var c,p,s,f,y,B,b,d,g;a._RF.push({},"7a2afBtsGdDB5J86sw2hElp","BaseEquipmentBullet",void 0);var m=o.ccclass,h=o.property;e("BaseEquipmentBullet",(c=m("BaseEquipmentBullet"),p=h(u),s=h({type:u,tooltip:"最远距离"}),f=h({type:u,tooltip:"速度"}),c((b=t((B=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"damage",b,i(t)),n(t,"maxMoveLength",d,i(t)),n(t,"speed",g,i(t)),t}r(t,e);var a=t.prototype;return a.dropLOOT=function(){return[]},a.update=function(e){},t}(l)).prototype,"damage",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),d=t(B.prototype,"maxMoveLength",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 300}}),g=t(B.prototype,"speed",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),y=B))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/BaseObject.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GlobalData.ts"],(function(t){"use strict";var o,e,n,s,a;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,s=t.Component},function(t){a=t.GlobalData}],execute:function(){var i;e._RF.push({},"3aaceBPrtJKuLcs7LQyfPap","BaseObject",void 0);var r=n.ccclass;t("BaseObject",r("BaseObject")(i=function(t){function e(){for(var o,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return(o=t.call.apply(t,[this].concat(n))||this).globalData=void 0,o.onDestroyed=void 0,o}o(e,t);var n=e.prototype;return n.start=function(){this.node.on("DESTORY",this._onDestroy.bind(this)),this.globalData=a.instance()},n.update=function(t){},n._onDestroy=function(){var t=this,o=this.dropLOOT();this.onDestroyed&&this.onDestroyed({loots:o}),o.forEach((function(o){o.setPosition(t.node.getPosition())}))},e}(s))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/BaseSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseObject.ts","./DamageNum.ts","./PoolManager.ts"],(function(t){"use strict";var e,n,o,i,r,a,s,c,l,u,h,p,g,f,m,d,C,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.CCInteger,c=t.Sprite,l=t.UITransform,u=t.Collider2D,h=t.Contact2DType,p=t.tween,g=t.math,f=t.resources,m=t.Prefab},function(t){d=t.BaseObject},function(t){C=t.DamageNum},function(t){y=t.PoolManager}],execute:function(){var b,N,v,B,D,T,S;r._RF.push({},"cc166Nqz/RB3IrE4KAnGAZl","BaseSprite",void 0);var w=a.ccclass,P=a.property;t("BaseSprite",(b=w("BaseSprite"),N=P(s),v=P(s),b((T=e((D=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"hp",T,i(e)),o(e,"speed",S,i(e)),e.curSprite=null,e.normalColor=null,e.hurtTween=null,e.damageNum=null,e.height=0,e.curHP=0,e}n(e,t);var r=e.prototype;return r.start=function(){var e=this;t.prototype.start.call(this),this.curHP=this.hp,this.curSprite=this.getComponent(c),this.normalColor=this.curSprite.color.clone();var n=this.node.getComponent(l);this.height=n.height;var o=this.getComponent(u);o&&(o.on(h.BEGIN_CONTACT,this.onBeginContact,this),o.on(h.END_CONTACT,this.onEndContact,this)),this.hurtTween=p(this.getComponent(c)).to(.1,{color:g.Color.RED}).to(.1,{color:this.normalColor}),f.load("prefabs/damageNum",m,(function(t,n){e.damageNum=n}))},r.onBeginContact=function(t,e,n){this.onCollide(t,e)},r.onEndContact=function(){this.onCollided()},r.onDisable=function(){},r.update=function(t){},r.hurt=function(t){this.hurtTween.start();var e=y.instance().getNode(this.damageNum,this.node.parent),n=this.node.position,o=e.getComponent(C);e.setPosition(n.x,n.y+this.height),o.show(t)},e}(d)).prototype,"hp",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),S=e(D.prototype,"speed",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),B=D))||B));r._RF.pop()}}}));

System.register("chunks:///_virtual/BaseWeapon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseEquipment.ts"],(function(e){"use strict";var n,t,r,s;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,r=e._decorator},function(e){s=e.BaseEquipment}],execute:function(){var a;t._RF.push({},"6a915VosalOVp7o78fO+dNI","BaseWeapon",void 0);var o=r.ccclass;r.property,e("BaseWeapon",o("BaseWeapon")(a=function(e){function t(){for(var n,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return(n=e.call.apply(e,[this].concat(r))||this).superLV=0,n}return n(t,e),t}(s))||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/Bow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseWeapon.ts","./UnitFunc.ts","./PoolManager.ts","./Player.ts","./BowBullet.ts"],(function(t){"use strict";var e,o,i,n,s,r,h,a,c,l,u,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,h=t.Prefab},function(t){a=t.BaseWeapon},function(t){c=t.UnitFunc},function(t){l=t.PoolManager},function(t){u=t.default},function(t){g=t.BowBullet}],execute:function(){var w,B,p,v,d;s._RF.push({},"0d258hKTkxPjIZpJOKPRcSu","Bow",void 0);var f=r.ccclass,m=r.property;t("Bow",(w=f("Bow"),B=m({type:h}),w((d=e((v=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,i(e,"bow",d,n(e)),e._currShootTime=0,e.shootTime=1,e}o(e,t);var s=e.prototype;return s.start=function(){this.equipmentName="Bow",this.maxLv=5},s.show=function(t){var e=t.level;this.lv=e},s.getBow=function(t,e,o){void 0===t&&(t=90),void 0===e&&(e=0),void 0===o&&(o=!1);var i=l.instance().getNode(this.bow,this.root),n=this.playerNode.getComponent(u),s=this.node.getPosition(),r=i.getComponent(g),h=n.moveDir.clone(),a=c.getTheta(h),w=c.getAngleVec(a+t);r.show({startVec:s,moveAngleVec:w,cross:o,speed:this.speed,maxMoveLength:this.maxMoveLength,damage:this.damage}),i.setPosition(s.add(w.clone().multiplyScalar(e)))},s.lv1=function(){this.getBow()},s.lv2=function(){this.getBow(110,5),this.getBow(90),this.getBow(70,5)},s.lv3=function(){this.getBow(130,5,!0),this.getBow(110,5),this.getBow(90),this.getBow(70,5),this.getBow(50,5,!0)},s.lv4=function(){this.getBow(150,5,!0),this.getBow(130,5,!0),this.getBow(110,5),this.getBow(90),this.getBow(70,5),this.getBow(50,5,!0),this.getBow(30,5,!0)},s.lv5=function(){this.getBow(170,5,!0),this.getBow(150,5,!0),this.getBow(130,5,!0),this.getBow(110,5),this.getBow(90),this.getBow(70,5),this.getBow(50,5,!0),this.getBow(30,5,!0),this.getBow(10,5,!0)},s.update=function(t){if(this._currShootTime+=t,this.playerNode){var e=this.playerNode.getComponent(u);this.node.setPosition(e.node.position.clone().add(e.moveDir.clone().multiplyScalar(0)))}this._currShootTime>this.shootTime&&this.playerNode.active&&(this["lv"+this.lv](),this._currShootTime=0)},e}(a)).prototype,"bow",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=v))||p));s._RF.pop()}}}));

System.register("chunks:///_virtual/BowBullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseEquipmentBullet.ts","./Params.ts","./UnitFunc.ts","./PoolManager.ts"],(function(t){"use strict";var e,n,o,s,i,a,c,r,l,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,s=t.Collider2D,i=t.Contact2DType,a=t.Vec3},function(t){c=t.BaseEquipmentBullet},function(t){r=t.ColliderTag},function(t){l=t.UnitFunc},function(t){u=t.PoolManager}],execute:function(){var h;n._RF.push({},"97fbfHZqO9Lu6PnEUoqqmh2","BowBullet",void 0);var g=o.ccclass;t("BowBullet",g("BowBullet")(h=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))||this)._moveVec=new a,e._cross=!1,e.angleOffset=225,e.startVec=new a,e}e(n,t);var o=n.prototype;return o.start=function(){t.prototype.start.call(this);var e=this.getComponent(s);e&&e.on(i.BEGIN_CONTACT,this.onBeginContact,this)},o.onBeginContact=function(t,e,n){var o=this;e.tag!==r.Enemy&&e.tag!==r.Wall||l.nextTick(this.node,(function(){u.instance().putNode(o.node)}))},o.show=function(t){var e=t.startVec,n=t.moveAngleVec,o=t.cross,s=void 0!==o&&o,i=t.maxMoveLength,a=void 0===i?500:i,c=t.speed,r=void 0===c?5:c,u=t.damage,h=void 0===u?10:u;this._moveVec=n,this._cross=s,this.node.angle=l.getTheta(n)+this.angleOffset,this.startVec=e,this.maxMoveLength=a,this.speed=r,this.damage=h},o.update=function(t){if(this.globalData&&"runing"===this.globalData.gameInfo.status){var e=this._moveVec.clone().multiplyScalar(this.speed),n=this.node.getPosition();if(a.squaredDistance(this.startVec,n)>this.maxMoveLength*this.maxMoveLength)return u.instance().putNode(this.node),void(this.node.angle=0);this.node.setPosition(n.add(e))}},n}(c))||h);n._RF.pop()}}}));

System.register("chunks:///_virtual/DamageNum.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts"],(function(e){"use strict";var t,n,o,r,i,a,s,c,u,l,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,s=e.CCInteger,c=e.Label,u=e.tween,l=e.Vec3,p=e.Component},function(e){f=e.PoolManager}],execute:function(){var g,y,h,m,d;i._RF.push({},"883a8YeVQhOLI4NuLtUf0pK","DamageNum",void 0);var v=a.ccclass,D=a.property;e("DamageNum",(g=v("DamageNum"),y=D(s),g((d=t((m=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"delayDestroy",d,r(t)),t}n(t,e);var i=t.prototype;return i.start=function(){},i.update=function(e){},i.show=function(e){var t=this;this.getComponent(c).string=""+e;var n=this.node.position;u(this.node).to(1,{position:new l(n.x,n.y+100)},{onComplete:function(){f.instance().putNode(t.node)}}).start()},t}(p)).prototype,"delayDestroy",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),h=m))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/Enemy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseEquipmentBullet.ts","./BaseSprite.ts","./Params.ts","./UnitFunc.ts","./PoolManager.ts"],(function(t){"use strict";var e,n,i,o,r,a,s,l,u,c,p,f,g,y,d,h,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Prefab,l=t.Node,u=t.CCInteger,c=t.Vec3,p=t.tween,f=t.bezier},function(t){g=t.BaseEquipmentBullet},function(t){y=t.BaseSprite},function(t){d=t.ColliderTag},function(t){h=t.UnitFunc},function(t){m=t.PoolManager}],execute:function(){var b,v,P,w,T,D,x,z,B,C,E;r._RF.push({},"608c2SDiClBwZdCk/fkevM+","Enemy",void 0);var I=a.ccclass,M=a.property;t("Enemy",(b=I("Enemy"),v=M(s),P=M({type:l}),w=M({type:u}),T=M(u),b((z=e((x=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"loot",z,o(e)),i(e,"player",B,o(e)),i(e,"damage",C,o(e)),i(e,"playTime",E,o(e)),e}n(e,t);var r=e.prototype;return r.onCollided=function(){},r.getMoveVec=function(){var t=this.player.getPosition(),e=this.node.getPosition(),n=t.subtract(e).normalize(),i=n.x*this.speed,o=n.y*this.speed;return new c(e.x+i,e.y+o)},r.start=function(){var e=this;t.prototype.start.call(this),this.schedule((function(){e.globalData&&"runing"===e.globalData.gameInfo.status&&e.playfruitsTween(e.getMoveVec())}),1)},r.playfruitsTween=function(t){var e=this.node,n=e.position,i=p(n),o=t.y+60,r=t.y,a=t.x,s=t.x;i.parallel(p().to(this.playTime,{x:t.x},{progress:function(t,e,n,i){return f(t,a,s,e,i)},easing:"circIn",onUpdate:function(){e.setPosition(n)}}),p().to(this.playTime,{y:t.y},{progress:function(t,e,n,i){return f(t,o,r,e,i)},easing:"circIn",onUpdate:function(){e.setPosition(n)}})).start()},r.update=function(t){this.globalData&&this.globalData.gameInfo.status},r.dropLOOT=function(){return[m.instance().getNode(this.loot,this.node.parent)]},r.onCollide=function(t,e){var n=this;if(e.tag===d.Equipment){var i=e.node.getComponent(g);this.curHP-=i.damage,this.curHP<=0&&h.nextTick(this.node,(function(){m.instance().putNode(n.node),n.curHP=n.hp+n.globalData.gameInfo.curse.enemy.addHP})),this.hurt(i.damage)}},e}(y)).prototype,"loot",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(x.prototype,"player",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(x.prototype,"damage",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),E=e(x.prototype,"playTime",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),D=x))||D));r._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyManager.ts",["cc","./AssetsCacheManager.ts","./GlobalData.ts","./UnitFunc.ts","./Exp.ts","./PoolManager.ts","./Enemy.ts"],(function(t){"use strict";var n,e,a,i,s,o,r,c,h,l,u;return{setters:[function(t){n=t.cclegacy,e=t._decorator,a=t.math,i=t.Vec3,s=t.Prefab},function(t){o=t.AssetsCacheManager},function(t){r=t.GlobalData},function(t){c=t.UnitFunc},function(t){h=t.Exp},function(t){l=t.PoolManager},function(t){u=t.Enemy}],execute:function(){var g,f;n._RF.push({},"18277g5OO5EU6tgS5gTZQNb","EnemyManager",void 0);var y=e.ccclass;t("EnemyManager",y("EnemyManager")(((f=function(){function t(t,n,e){var a=this;this.enemyPrefabList=[],this.enemyRoot=null,this.player=void 0,this.globalData=void 0,this.startInterval=void 0,this.generateEnemyTypeList=[],this.runSecond=0;var i=o.instance();this.globalData=r.instance(),i.resources.loadDir("nodes/Enemy",s,(function(t,n){a.enemyPrefabList=n})),this.init(t,n,e)}t.instance=function(n,e,a){return this._instance||(this._instance=new t(n,e,a)),n&&e&&a&&this._instance.init(n,e,a),this._instance};var n=t.prototype;return n.init=function(t,n,e){this.enemyRoot=t,this.player=n,this.generateEnemyTypeList=e},n.start=function(t){this.stop(),this.startInterval=setInterval(this._generate.bind(this),t)},n.stop=function(){this.startInterval&&(clearInterval(this.startInterval),this.startInterval=void 0)},n._generate=function(){var t=this;this.enemyPrefabList.length<=0||"pause"===this.globalData.gameInfo.status||(this.single(),this.runSecond++,this.generateEnemyTypeList.forEach((function(n){t.runSecond>0&&t.runSecond%n.timespan==0&&t[n.type](n.count)})))},n.single=function(){var t=this,n=this.enemyPrefabList[a.randomRangeInt(0,this.enemyPrefabList.length)],e=l.instance().getNode(n,this.enemyRoot),s=c.getObjectComponent(e,u);s.onDestroyed=function(n){n.loots.forEach((function(t){t.getComponent(h).show(a.randomRangeInt(1,6))})),t.globalData.gameInfo.score+=1},s.player=this.player;var o=this.player.position,r=c.getAngleVec(a.randomRangeInt(0,361),500),g=r.x,f=r.y;e.position=new i(o.x+g,o.y+f)},n.multiple=function(t){for(var n=0;n<t;n++)this.single()},t}())._instance=void 0,g=f))||g);n._RF.pop()}}}));

System.register("chunks:///_virtual/EquipmentData.ts",["cc"],(function(i){"use strict";var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"5dd89c90UBNQrGWLq/yySAQ","EquipmentData",void 0);i("EquipmentData",{Bow:{icon:"Bow",type:"Weapon",levels:{1:{discription:"一箭"},2:{discription:"两箭"},3:{discription:"三箭"},4:{discription:"四箭"},5:{discription:"五箭"}}},Attractorb:{icon:"Attractorb",type:"Passive",levels:{1:{discription:"Attractorb"},2:{discription:"增加范围"},3:{discription:"增加范围"},4:{discription:"增加范围"},5:{discription:"增加范围"}}}});t._RF.pop()}}}));

System.register("chunks:///_virtual/Exp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AssetsCacheManager.ts"],(function(t){"use strict";var e,a,n,s,r,i;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy,n=t._decorator,s=t.Sprite,r=t.Component},function(t){i=t.AssetsCacheManager}],execute:function(){var o;a._RF.push({},"3e4fercnIBJyLGgqEqcBk3n","Exp",void 0);var c,p=n.ccclass;n.property;!function(t){t[t.lv1=100]="lv1",t[t.lv2=200]="lv2",t[t.lv3=300]="lv3",t[t.lv4=400]="lv4",t[t.lv5=500]="lv5"}(c||(c={}));t("Exp",p("Exp")(o=function(t){function a(){for(var e,a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this).expValue=0,e.attract=!1,e.attractTarget=void 0,e.speed=500,e}e(a,t);var n=a.prototype;return n.start=function(){this.node.getComponent(s)},n.show=function(t){this.expValue=c["lv"+t],this.node.getComponent(s).spriteFrame=i.instance().assetsCache.ExpIcons[t-1],this.attractTarget=void 0,this.attract=!1},n.attractTo=function(t){this.attractTarget=t,this.attract=!0},n.update=function(t){if(this.attract&&this.attractTarget){var e=this.attractTarget.getPosition(),a=this.node.getPosition(),n=e.subtract(a).normalize(),s=n.x*this.speed*t,r=n.y*this.speed*t;this.node.setPosition(a.x+s,a.y+r)}},a}(r))||o);a._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AssetsCacheManager.ts","./BaseEquipment.ts","./BaseWeapon.ts","./EquipmentData.ts","./GlobalData.ts","./ListItem.ts","./UnitFunc.ts","./EnemyManager.ts","./Exp.ts","./LoadingManager.ts","./PoolManager.ts","./Player.ts"],(function(e){"use strict";var a,n,t,o,r,i,s,l,c,u,p,m,g,f,d,y,h,v,b,x,M,I,L,w,B,P,D,C,E;return{setters:[function(e){a=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,c=e.Camera,u=e.TiledMap,p=e.Node,m=e.Prefab,g=e.assetManager,f=e.director,d=e.ScrollView,y=e.math,h=e.Component},function(e){v=e.AssetsCacheManager},function(e){b=e.BaseEquipment},function(e){x=e.BaseWeapon},function(e){M=e.EquipmentData},function(e){I=e.GlobalData},function(e){L=e.ListItem},function(e){w=e.UnitFunc},function(e){B=e.EnemyManager},function(e){P=e.Exp},function(e){D=e.LoadingManager},function(e){C=e.PoolManager},function(e){E=e.default}],execute:function(){var N,k,R,U,q,G,z,T,j,W,A,S,F,V,_,H,J,K,O,X,Z;s._RF.push({},"37d0586NbBKpZhP5EqLdIea","GameManager",void 0);var Q=l.ccclass,Y=l.property;e("GameManager",(N=Q("GameManager"),k=Y({type:c}),R=Y({type:u,displayName:"TiledMap",tooltip:"地图"}),U=Y({type:p,displayName:"WeaponRoot"}),q=Y({type:p,displayName:"EnemyRoot"}),G=Y({type:p,displayName:"GGBoy"}),z=Y({type:p,displayName:"LevelUPBox"}),T=Y({type:p,displayName:"LoadingBox"}),j=Y({type:p,displayName:"MessageBox"}),W=Y({type:p,displayName:"JoyStick"}),N((F=a((S=function(e){function a(){for(var a,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return a=e.call.apply(e,[this].concat(r))||this,t(a,"camera",F,o(a)),t(a,"tiledMap",V,o(a)),t(a,"weaponRoot",_,o(a)),t(a,"enemyRoot",H,o(a)),t(a,"ggBox",J,o(a)),t(a,"LevelUPBox",K,o(a)),t(a,"LoadingBox",O,o(a)),t(a,"MessageBox",X,o(a)),t(a,"joystick",Z,o(a)),a.listItemPrefab=void 0,a.player=void 0,a.weaponManagerList=[],a.resources=void 0,a.globalData=void 0,a.loadingManager=void 0,a}n(a,e);var s=a.prototype;return s.start=function(){var e=this;console.log("GameManager start"),this.loadingManager=this.LoadingBox.getComponent(D),this.loadingManager.processing(10),this.globalData=I.instance(),this.globalData.init({player:{name:"adventurer",exp:0,lv:1,needExp:100,hp:1e4},equipment:[{name:"bow",level:1},{name:"attractorb",level:1}]},this.MessageBox);var a=this.globalData.playerInfo,n=a.player,t=a.equipment,o=v.instance();this.resources=o.resources,this.loadingManager.processing(30),this.resources.load("nodes/Item/listItem",m,(function(a,n){e.listItemPrefab=n})),this.resources.load("nodes/Player/"+n.name,m,(function(a,n){var o=C.instance().getNode(n,e.node);e.player=o;var r=w.getObjectComponent(o,E);r.camera=e.camera,r.tiledMap=e.tiledMap,r.onDestroyed=function(){e.globalData.gameInfo.status="pause",e.unscheduleAllCallbacks(),console.log("GG"),e.ggBox.active=!0,e.weaponManagerList.forEach((function(e){return C.instance().putNode(e)}))},r.onEXP=e.handleExp.bind(e),e.loadingManager.processing(50),t.forEach((function(a){e.loadWeapon(e.resources,o,a.name,a)})),B.instance(e.enemyRoot,e.player,[{type:"multiple",timespan:30,count:5}]).start(e.globalData.gameInfo.curse.enemy.refreshTime),e.loadingManager.processing(100),setTimeout((function(){e.loadingManager.hide(),e.globalData.gameInfo.status="runing"}),1e3)}))},s.loadWeapon=function(e,a,n,t){var o=this;e.load("nodes/Equipment/"+n+"/"+n,m,(function(e,n){var r=C.instance().getNode(n,o.weaponRoot),i=r.getComponent(b);i.show(t),i.playerNode=a,i.root=o.weaponRoot,o.weaponManagerList.push(r)}))},s.onBack=function(){g.getBundle("main").loadScene("start",(function(e,a){f.runScene(a)}))},s.addLevelUPItem=function(e,a,n){var t=e.icon,o=e.text,r=e.lv,i=C.instance().getNode(this.listItemPrefab,a).getComponent(L);i.show({icon:t,text:o,lv:r}),i.onClick=n},s.LevelUP=function(){var e=this;return new Promise((function(a,n){var t=e.LevelUPBox.getChildByName("ItemList").getComponent(d),o=0;if(t.content.destroyAllChildren(),e.weaponManagerList.forEach((function(n){var r=n.getComponent(b);if(!(r.lv>=r.maxLv)){var i=v.instance().assetsCache[r.equipmentName];e.addLevelUPItem({icon:i[0],text:""+M[r.equipmentName].levels[""+(r.lv+1)].discription,lv:r.lv+1},t.content,(function(){r.upgrade(),a(0)})),o++}})),0===o){var r=e.weaponManagerList.filter((function(e){var a=e.getComponent(b);return"Weapon"===M[a.equipmentName].type}));if(r.length>0){var i=r[0],s=[{name:"area",text:"+1% area"},{name:"damage",text:"+1 damage"}],l=s[y.randomRangeInt(0,s.length)],c=i.getComponent(x),u=v.instance().assetsCache[c.equipmentName];e.addLevelUPItem({icon:u[0],text:l.text,lv:c.lv+c.superLV+1},t.content,(function(){switch(c.superLV++,l.name){case"area":c.maxMoveLength+=c.maxMoveLength/10;break;case"damage":var e=c.damage/10;c.damage+=e<1?1:e}a(0)}));var p=[{name:"count",text:"curse: enemy +1% count"},{name:"hp",text:"curse: enemy +10 hp"}],m=p[y.randomRangeInt(0,p.length)],g=I.instance();e.addLevelUPItem({icon:v.instance().assetsCache.Common.Curse,text:m.text,lv:g.gameInfo.curse.lv+1},t.content,(function(){switch(g.gameInfo.curse.lv++,m.name){case"count":g.gameInfo.curse.enemy.refreshTime=.9*g.gameInfo.curse.enemy.refreshTime,B.instance().start(g.gameInfo.curse.enemy.refreshTime);break;case"hp":g.gameInfo.curse.enemy.addHP+=10}a(0)}))}}}))},s.update=function(e){},s.handleExp=function(){var e=r(i().mark((function e(a){var n,t,o,r,s,l,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.getComponent(P),t=this.globalData.playerInfo.player,o=t.exp,r=t.needExp,s=n.expValue,l=!1,c=r-o;case 5:if(!(s>=c)){e.next=16;break}return s-=c,this.globalData.playerInfo.player.exp=0,this.globalData.playerInfo.player.needExp+=100*this.globalData.playerInfo.player.lv,this.globalData.playerInfo.player.lv+=1,c=this.globalData.playerInfo.player.needExp,l||(this.pause(),l=!0),e.next=14,this.LevelUP();case 14:e.next=5;break;case 16:this.globalData.playerInfo.player.exp+=s,l&&this.resume();case 18:case"end":return e.stop()}}),e,this)})));return function(a){return e.apply(this,arguments)}}(),s.pause=function(){var e=this;w.nextTick(this.node,r(i().mark((function a(){return i().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.globalData.gameInfo.status="pause",e.joystick.active=!1,e.player.active=!1,e.LevelUPBox.active=!0;case 4:case"end":return a.stop()}}),a)}))))},s.resume=function(){var e=this;w.nextTick(this.node,r(i().mark((function a(){return i().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.globalData.gameInfo.status="runing",e.LevelUPBox.active=!1,e.joystick.active=!0,e.player.active=!0;case 4:case"end":return a.stop()}}),a)}))))},a}(h)).prototype,"camera",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=a(S.prototype,"tiledMap",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=a(S.prototype,"weaponRoot",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=a(S.prototype,"enemyRoot",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=a(S.prototype,"ggBox",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=a(S.prototype,"LevelUPBox",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=a(S.prototype,"LoadingBox",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=a(S.prototype,"MessageBox",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=a(S.prototype,"joystick",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=S))||A));s._RF.pop()}}}));

System.register("chunks:///_virtual/GlobalData.ts",["cc"],(function(e){"use strict";var t,n,i;return{setters:[function(e){t=e.cclegacy,n=e._decorator,i=e.Label}],execute:function(){var r,o;t._RF.push({},"1cef86C/iBAbIhS6wNY75h0","GlobalData",void 0);var s=n.ccclass;e("GlobalData",s("GlobalData")(((o=function(){function e(){this.gameInfo=void 0,this.playerInfo=void 0}e.instance=function(){return this._instance||(this._instance=new e),this._instance};var t=e.prototype;return t.init=function(e,t){var n=this;this.gameInfo={status:"pause",score:0,curse:{lv:0,enemy:{refreshTime:1e3,addHP:0}}},this.playerInfo=e;var r=this.playerInfo.player.exp,o=this.playerInfo.player.needExp,s=this.playerInfo.player.hp,a=this.playerInfo.player.lv,f=this.gameInfo.score,p=t.getChildByPath("info/EXP").getComponent(i),c=t.getChildByPath("info/HP").getComponent(i),l=t.getChildByPath("info/LEVEL").getComponent(i),h=t.getChildByPath("info/SCORE").getComponent(i);this.setEXP(p),this.setHP(c),this.setLEVEL(l),this.setSCORE(h),Object.defineProperty(this.playerInfo.player,"exp",{get:function(){return r},set:function(e){r=e,n.setEXP(p)}}),Object.defineProperty(this.playerInfo.player,"needExp",{get:function(){return o},set:function(e){o=e,n.setEXP(p)}}),Object.defineProperty(this.playerInfo.player,"hp",{get:function(){return s},set:function(e){s=e,n.setHP(c)}}),Object.defineProperty(this.playerInfo.player,"lv",{get:function(){return a},set:function(e){a=e,n.setLEVEL(l)}}),Object.defineProperty(this.gameInfo,"score",{get:function(){return f},set:function(e){f=e,n.setSCORE(h)}})},t.setEXP=function(e){e.string="EXP:"+this.playerInfo.player.exp+"/"+this.playerInfo.player.needExp},t.setHP=function(e){e.string="HP:"+this.playerInfo.player.hp},t.setLEVEL=function(e){e.string="LV:"+this.playerInfo.player.lv},t.setSCORE=function(e){e.string="SCORE:"+this.gameInfo.score},e}())._instance=void 0,r=o))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/Joystick.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,o,n,s,r,c,a,p,u,y,l,h,T,d,g,f;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,c=t.EventTarget,a=t.Node,p=t.Enum,u=t.Vec3,y=t.Vec2,l=t.CCInteger,h=t.UITransform,T=t.Size,d=t.UIOpacity,g=t.Input,f=t.Component}],execute:function(){var v,E,L,_,O,m,b,k,S,C,P,w,F,I,D,U,z;t({DirectionType:void 0,JoystickType:void 0,SpeedType:void 0}),s._RF.push({},"73162lxt5BLxbtr/vpxLfXd","Joystick",void 0);var A,N,R,J=r.ccclass,H=r.property,j=t("instance",new c),M=t("SET_JOYSTICK_TYPE","SET_JOYSTICK_TYPE");!function(t){t[t.FOUR=0]="FOUR",t[t.EIGHT=1]="EIGHT",t[t.ALL=2]="ALL"}(A||(A=t("DirectionType",{}))),function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.FAST=2]="FAST"}(N||(N=t("SpeedType",{}))),function(t){t[t.FIXED=0]="FIXED",t[t.FOLLOW=1]="FOLLOW"}(R||(R=t("JoystickType",{})));t("Joystick",(v=J("Joystick"),E=H({type:a,displayName:"Dot",tooltip:"摇杆操纵点"}),L=H({type:a,displayName:"Ring",tooltip:"摇杆背景节点"}),_=H({type:p(R),displayName:"Touch Type",tooltip:"触摸类型"}),O=H({type:p(A),displayName:"Direction Type",tooltip:"方向类型"}),m=H({type:u,tooltip:"摇杆所在位置"}),b=H({type:y,tooltip:"触摸位置"}),k=H({type:l,displayName:"Ring Radius",tooltip:"半径"}),v((P=i((C=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return i=t.call.apply(t,[this].concat(s))||this,o(i,"dot",P,n(i)),o(i,"ring",w,n(i)),o(i,"joystickType",F,n(i)),o(i,"directionType",I,n(i)),o(i,"_stickPos",D,n(i)),o(i,"_touchLocation",U,n(i)),o(i,"radius",z,n(i)),i}e(i,t);var s=i.prototype;return s.onLoad=function(){var t;if(this.dot)if(this.ring){var i=this.ring.getComponent(h),e=2*this.radius,o=new T(e,e);null==i||i.setContentSize(o),null==(t=this.ring.getChildByName("bg").getComponent(h))||t.setContentSize(o),this._initTouchEvent();var n=this.node.getComponent(d);this.joystickType===R.FOLLOW&&n&&(n.opacity=0)}else console.warn("Joystick Ring is null!");else console.warn("Joystick Dot is null!")},s.onEnable=function(){j.on(M,this._onSetJoystickType,this)},s.onDisable=function(){j.off(M,this._onSetJoystickType,this)},s._onSetJoystickType=function(t){this.joystickType=t;var i=this.node.getComponent(d);i&&(i.opacity=t===R.FIXED?255:0)},s._initTouchEvent=function(){this.node.on(g.EventType.TOUCH_START,this._touchStartEvent,this),this.node.on(g.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(g.EventType.TOUCH_END,this._touchEndEvent,this),this.node.on(g.EventType.TOUCH_CANCEL,this._touchEndEvent,this)},s._touchStartEvent=function(t){if(this.ring&&this.dot){j.emit(g.EventType.TOUCH_START,t);var i=t.getUILocation(),e=new u(i.x,i.y);if(this.joystickType===R.FIXED){this._stickPos=this.ring.getPosition();var o=e.subtract(this.ring.getPosition()),n=o.length();this.radius>n&&this.dot.setPosition(o)}else this.joystickType===R.FOLLOW&&(this._stickPos=e,this.node.getComponent(d).opacity=255,this._touchLocation=t.getUILocation(),this.ring.setPosition(e),this.dot.setPosition(new u))}},s._touchMoveEvent=function(t){if(this.dot&&this.ring){if(this.joystickType===R.FOLLOW&&this._touchLocation===t.getUILocation())return!1;var i=t.getUILocation(),e=new u(i.x,i.y).subtract(this.ring.getPosition()),o=e.length(),n=N.NORMAL;this.radius>o?(this.dot.setPosition(e),n=N.NORMAL):(this.dot.setPosition(e.normalize().multiplyScalar(this.radius)),n=N.FAST),j.emit(g.EventType.TOUCH_MOVE,t,{speedType:n,moveVec:e.normalize()})}},s._touchEndEvent=function(t){this.dot&&this.ring&&(this.dot.setPosition(new u),this.joystickType===R.FOLLOW&&(this.node.getComponent(d).opacity=0),j.emit(g.EventType.TOUCH_END,t,{speedType:N.STOP}))},i}(f)).prototype,"dot",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(C.prototype,"ring",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(C.prototype,"joystickType",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.FIXED}}),I=i(C.prototype,"directionType",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return A.ALL}}),D=i(C.prototype,"_stickPos",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),U=i(C.prototype,"_touchLocation",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y}}),z=i(C.prototype,"radius",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),S=C))||S));s._RF.pop()}}}));

System.register("chunks:///_virtual/ListItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,i,o,r,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,o=t.Sprite,r=t.Label,c=t.Component}],execute:function(){var s;n._RF.push({},"45cba+NN0ZH+KWxxa8PZdfJ","ListItem",void 0);var a=i.ccclass;t("ListItem",a("ListItem")(s=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).onClick=void 0,e}e(n,t);var i=n.prototype;return i.start=function(){},i.show=function(t){var e=t.icon,n=t.lv,i=t.text;this.node.getChildByPath("leftWrap/icon").getComponent(o).spriteFrame=e,this.node.getChildByPath("leftWrap/lv").getComponent(r).string="lv"+n,this.node.getChildByPath("rightWrap/text").getComponent(r).string=i},i.handleClick=function(){this.onClick&&this.onClick()},i.update=function(t){},n}(c))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,o,r,i,a;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,r=t.UITransform,i=t.math,a=t.Component}],execute:function(){var c;e._RF.push({},"b4764pgbSBJWb9yoClLsh+t","LoadingManager",void 0);var s=o.ccclass;o.property,t("LoadingManager",s("LoadingManager")(c=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(n=t.call.apply(t,[this].concat(o))||this).maxWidth=384,n}n(e,t);var o=e.prototype;return o.start=function(){},o.update=function(t){},o.processing=function(t){var n=this.node.getChildByName("Process").getComponent(r);n.setContentSize(new i.Size(this.maxWidth*(t/100),n.contentSize.height))},o.hide=function(){this.node.active=!1},e}(a))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AssetsCacheManager.ts","./BaseEquipment.ts","./BaseEquipmentBullet.ts","./BaseObject.ts","./BaseSprite.ts","./BaseWeapon.ts","./DamageNum.ts","./EquipmentData.ts","./GlobalData.ts","./ListItem.ts","./Params.ts","./UnitFunc.ts","./EnemyManager.ts","./Attractorb.ts","./Bow.ts","./BowBullet.ts","./GameManager.ts","./Exp.ts","./Joystick.ts","./UI.ts","./LoadingManager.ts","./PoolManager.ts","./Enemy.ts","./Player.ts","./StartManager.ts","./TiledMapManager.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Params.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var r;e("ColliderTag",void 0),t._RF.push({},"6b017qRzCRC44O93iNzMVlF","Params",void 0),function(e){e[e.Player=0]="Player",e[e.Enemy=1]="Enemy",e[e.Equipment=2]="Equipment",e[e.Exp=3]="Exp",e[e.Wall=4]="Wall"}(r||(r=e("ColliderTag",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Joystick.ts","./PoolManager.ts","./UnitFunc.ts","./BaseSprite.ts","./Enemy.ts","./Params.ts"],(function(e){"use strict";var t,i,n,a,o,s,r,p,l,c,h,u,d,m,y,f,_,T,g,x;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,r=e.CCInteger,p=e.Camera,l=e.TiledMap,c=e.Animation,h=e.Input,u=e.view,d=e.Vec3},function(e){m=e.instance,y=e.SpeedType},function(e){f=e.PoolManager},function(e){_=e.UnitFunc},function(e){T=e.BaseSprite},function(e){g=e.Enemy},function(e){x=e.ColliderTag}],execute:function(){var S,v,M,b,P,w,C,E,X,z,D,O,Y,H,k,N,I;o._RF.push({},"86842yzmPdBu5M4IOLKy+1y","Player",void 0);var A=s.ccclass,F=s.property;e("default",(S=A("Player"),v=F({displayName:"Move Dir",tooltip:"移动方向"}),M=F({tooltip:"速度级别"}),b=F({type:r,tooltip:"停止时速度"}),P=F({type:r,tooltip:"正常速度"}),w=F({type:r,tooltip:"最快速度"}),C=F({type:p,displayName:"Camera",tooltip:"相机"}),E=F({type:l,displayName:"TiledMap",tooltip:"地图"}),S((D=t((z=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,n(t,"moveDir",D,a(t)),n(t,"_speedType",O,a(t)),n(t,"stopSpeed",Y,a(t)),n(t,"normalSpeed",H,a(t)),n(t,"fastSpeed",k,a(t)),n(t,"camera",N,a(t)),n(t,"tiledMap",I,a(t)),t._anime=null,t._cameraMaxX=0,t._cameraMaxY=0,t._maxX=0,t._maxY=0,t.canHurt=!0,t.colliding=!1,t.onEXP=void 0,t}i(t,e);var o=t.prototype;return o.start=function(){e.prototype.start.call(this),this._anime=this.getComponent(c),m.on(h.EventType.TOUCH_START,this.onTouchStart,this),m.on(h.EventType.TOUCH_MOVE,this.onTouchMove,this),m.on(h.EventType.TOUCH_END,this.onTouchEnd,this);var t=this.tiledMap.getMapSize(),i=this.tiledMap.getTileSize(),n=u.getVisibleSize();this._cameraMaxX=t.width*i.width/2-n.width/2,this._cameraMaxY=t.height*i.height/2-n.height/2,this._maxX=t.width*i.width/2-25,this._maxY=t.height*i.height/2-25},o.onTouchStart=function(e,t){this._anime.play("walk")},o.onTouchMove=function(e,t){this._speedType=t.speedType,this.moveDir=t.moveVec,this.moveDir.x>0?this.node.setScale(1,1):this.node.setScale(-1,1),this.onSetMoveSpeed(this._speedType)},o.onTouchEnd=function(e,t){this._speedType=t.speedType,this.onSetMoveSpeed(this._speedType),this._anime.stop(),this._anime.resume()},o.onSetMoveSpeed=function(e){switch(e){case y.STOP:this.speed=this.stopSpeed;break;case y.NORMAL:this.speed=this.normalSpeed;break;case y.FAST:this.speed=this.fastSpeed}},o.updateCameraPosition=function(){var e=this.node.getPosition();e.x>this._cameraMaxX&&(e.x=this._cameraMaxX),e.x<-this._cameraMaxX&&(e.x=-this._cameraMaxX),e.y>this._cameraMaxY&&(e.y=this._cameraMaxY),e.y<-this._cameraMaxY&&(e.y=-this._cameraMaxY),this.camera.node.position=e},o.updatePlayerPosition=function(e){e.x>this._maxX&&(e.x=this._maxX),e.x<-this._maxX&&(e.x=-this._maxX),e.y>this._maxY&&(e.y=this._maxY),e.y<-this._maxY&&(e.y=-this._maxY),this.node.setPosition(e)},o.move=function(){var e=this.node.getPosition().add(this.moveDir.clone().multiplyScalar(this.speed/60));this.updatePlayerPosition(e)},o.update=function(e){this._speedType!==y.STOP&&this.move(),this.updateCameraPosition()},o.onCollide=function(e,t){var i=this;if(t.tag===x.Exp)this.onEXP&&this.onEXP(t.node),_.nextTick(this.node,(function(){f.instance().putNode(t.node)}));else if(t.tag===x.Enemy&&this.canHurt){this.colliding=!0,this.canHurt=!1;var n=t.node.getComponent(g);this.globalData.playerInfo.player.hp-=n.damage,this.globalData.playerInfo.player.hp<=0&&_.nextTick(this.node,(function(){f.instance().putNode(i.node)})),this.hurt(n.damage),setTimeout((function(){i.canHurt=!0,i.colliding&&i.onCollide(e,t)}),1e3)}},o.dropLOOT=function(){return[]},o.onDisable=function(){this.onTouchEnd(void 0,{speedType:y.STOP})},o.onCollided=function(){this.colliding=!1},t}(T)).prototype,"moveDir",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new d(1,0,0)}}),O=t(z.prototype,"_speedType",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.STOP}}),Y=t(z.prototype,"stopSpeed",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),H=t(z.prototype,"normalSpeed",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),k=t(z.prototype,"fastSpeed",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),N=t(z.prototype,"camera",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(z.prototype,"tiledMap",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=z))||X));o._RF.pop()}}}));

System.register("chunks:///_virtual/PoolManager.ts",["cc"],(function(t){"use strict";var n,e,i,o;return{setters:[function(t){n=t.cclegacy,e=t._decorator,i=t.instantiate,o=t.NodePool}],execute:function(){var a,r;n._RF.push({},"b703fmlofZAoIrqnxcGpajd","PoolManager",void 0);var c=e.ccclass;e.property,t("PoolManager",c("PoolManager")(((r=function(){function t(){this._dictPool={},this._dictPrefab={}}t.instance=function(){return this._instance||(this._instance=new t),this._instance};var n=t.prototype;return n.getNode=function(t,n){if(!t)return null;var e=t.data.name,a=null;this._dictPrefab[e]=t;var r=this._dictPool[e];return r?a=r.size()>0?r.get():i(t):(this._dictPool[e]=new o,a=i(t)),a.parent=n,a.active=!0,a},n.putNode=function(t){var n=t.name;t.emit("DESTORY"),t.parent=null,this._dictPool[n]||(this._dictPool[n]=new o),this._dictPool[n].put(t)},t}())._instance=void 0,a=r))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/StartManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,r,e,a,o,c;return{setters:[function(t){n=t.inheritsLoose},function(t){r=t.cclegacy,e=t._decorator,a=t.assetManager,o=t.director,c=t.Component}],execute:function(){var i;r._RF.push({},"9d3c4lpVfRMBoNZoKjBKi1E","StartManager",void 0);var u=e.ccclass;e.property,t("StartManager",u("StartManager")(i=function(t){function r(){return t.apply(this,arguments)||this}n(r,t);var e=r.prototype;return e.start=function(){},e.update=function(t){},e.onStart=function(){a.getBundle("main").loadScene("joystick",(function(t,n){o.runScene(n)}))},r}(c))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/TiledMapManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,a,r,n,i,p,l,d,c,s;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,a=e._decorator,r=e.TiledMap,n=e.UITransform,i=e.RigidBody2D,p=e.ERigidBody2DType,l=e.BoxCollider2D,d=e.Vec2,c=e.math,s=e.Component}],execute:function(){var u;o._RF.push({},"68a56Mha6FMrIwJLNBEI7BE","TiledMapManager",void 0);var g=a.ccclass;a.property,e("TiledMapManager",g("TiledMapManager")(u=function(e){function o(){return e.apply(this,arguments)||this}t(o,e);var a=o.prototype;return a.onLoad=function(){for(var e=this.node.getComponent(r),t=e.getLayer("Wall"),o=e.getComponent(n),a=t.getLayerSize(),s=0;s<a.width;s++)for(var u=0;u<a.height;u++){if(0!=t.getTileGIDAt(s,u)){var g=t.getTiledTileAt(s,u,!0);g.node.layer=25;var f=g.node.addComponent(i);f.group=4,f.type=p.Static,f.gravityScale=0,f.allowSleep=!1;var h=g.node.addComponent(l);h.group=4,h.offset=new d(-o.width/2,-o.height/2),h.size=c.size(16,16),h.apply()}}},a.update=function(e){},o}(s))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/UI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Joystick.ts"],(function(t){"use strict";var e,n,o,s,c,i,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,s=t.Component},function(t){c=t.instance,i=t.SET_JOYSTICK_TYPE,r=t.JoystickType}],execute:function(){var u;n._RF.push({},"df968oG9ClOtaKssOzeyetw","UI",void 0);var p=o.ccclass;t("UI",p("UI")(u=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.useFixedType=function(){c.emit(i,r.FIXED)},o.useFollowType=function(){c.emit(i,r.FOLLOW)},n}(s))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/UnitFunc.ts",["cc"],(function(n){"use strict";var t,e,c,u;return{setters:[function(n){t=n.cclegacy,e=n.Vec3,c=n.Vec2,u=n.Tween}],execute:function(){t._RF.push({},"7c921Jf9U1F/r+gepS6ZPGd","UnitFunc",void 0),n("UnitFunc",function(){function n(){}return n.getAngleVec=function(n,t){void 0===t&&(t=1);var c=Math.cos(n*Math.PI/180)*t,u=Math.sin(n*Math.PI/180)*t;return new e(c,u)},n.getTheta=function(n){return 180*new c(0,1).signAngle(new c(n.x,n.y))/Math.PI},n.nextTick=function(n,t){new u(n).by(0,null,{onUpdate:function(){t()}}).start()},n}()).getObjectComponent=function(n,t){return n.getComponent(t)},t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});